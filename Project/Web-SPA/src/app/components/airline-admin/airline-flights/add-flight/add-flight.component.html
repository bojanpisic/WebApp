<header>
    <div *ngIf="step === 1" (click)="exit()" class="back">
        <svg aria-hidden="true" role="presentation" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="display: block; fill: rgb(34, 34, 34); height: 16px; width: 16px; stroke: rgb(34, 34, 34); stroke-width: 4; overflow: visible;"><path d="m6 6 20 20"></path><path d="m26 6-20 20"></path></svg>
    </div>
    <div *ngIf="step !== 1" (click)="previousStep()" class="back">
        <svg viewBox="0 0 16 16" role="presentation" aria-hidden="true" focusable="false" style="height: 1em; width: 1em; display: block; fill: rgb(34, 34, 34);"><path d="m10.8 16c-.4 0-.7-.1-.9-.4l-6.8-6.7c-.5-.5-.5-1.3 0-1.8l6.8-6.7c.5-.5 1.2-.5 1.7 0s .5 1.2 0 1.7l-5.8 5.9 5.8 5.9c.5.5.5 1.2 0 1.7-.2.3-.5.4-.8.4"></path></svg>
    </div>
    <span>Add flight</span>
    <span>{{step}}/4</span>
</header>
<main>
    <div *ngIf="step === 1" class="main">
        <form [formGroup]="formFrom" (ngSubmit)="onSubmitFrom()">
            <h3>Departure</h3>
            <p>From:</p>
            <app-places-search (focused)="removeErrorClass()" [error]="errorFromLocation" (inputValue)="onFromInputChange($event)" [addFlight]="true" [ngStyle]="{'padding-left': '0px'}" (cityName)='onFrom($event)'></app-places-search>
            <p>Departure date:</p>
            <input [ngClass]="{'error-input': (formFrom.controls.date.touched || departureDateInvalid) && formFrom.controls.date.invalid}" type="date" id='takeoff-date' formControlName="date">
            <div class="error" *ngIf="(formFrom.controls.date.touched || departureDateInvalid) && formFrom.controls.date.invalid">
                Departure date is required!
            </div>
            <p>Departure time:</p>
            <input [ngClass]="{'error-input': (formFrom.controls.time.touched || departureTimeInvalid) && formFrom.controls.time.invalid}" type="time" id='takeoff-time' formControlName="time">
            <div class="error" *ngIf="(formFrom.controls.time.touched || departureTimeInvalid) && formFrom.controls.time.invalid">
                Departure time is required!
            </div>
            <button class="next" type="submit">Next</button>
        </form>
    </div>
    <div *ngIf="step === 2" class="main">
        <div class="radio-group">
            <label class="radio">
                <input (change)="onFlightType($event)" type="radio" name="flight-type" value="direct flight" [checked]="(flightType === 'direct flight')">
                Direct flight
                <span></span>
            </label>
            <label class="radio">
                <input (click)="onFlightType($event)" type="radio" name="flight-type" value="with stops" [checked]="(flightType === 'with stops')">
                With stops
                <span></span>
            </label>
        </div>
        <div *ngIf="flightType === 'with stops'" class="with-stops">
            <ul>
                <li>
                    <ng-container #viewContainerRef1>
                        <ng-template #tpl let-number='number' let-city='city' let-state='state'>
                            <span>{{(number === 1) ? '1st' : (number === 2) ? '2nd' : number + 'th'}} stop:</span><h3>{{city}}, {{state}}</h3><br>
                        </ng-template>
                    </ng-container>
                </li>
                <li>
                    <ng-template #viewContainerRef></ng-template>
                </li>
            </ul>
            <div class="error" *ngIf="sameLocationPicked">
                You've already picked this location!
            </div>
            <div class="buttons">
                <button id="remove" (click)="onRemoveStop()">Undo</button><button (click)="onAddStop()" id="add">ADD</button>
            </div>
        </div>
        <button class="next" (click)="nextStep()">Next</button>
    </div>
    <div *ngIf="step === 3" class="main">
        <form [formGroup]="formTo" (ngSubmit)="onSubmitTo()">
            <h3>Arrival</h3>
            <p>To:</p>
            <app-places-search (focused)="removeErrorClass()" [error]="errorFromLocation" (inputValue)="onToInputChange($event)" [addFlight]="true" [ngStyle]="{'padding-left': '0px'}" (cityName)='onTo($event)'></app-places-search>
            <p>Arrival date:</p>
            <input [ngClass]="{'error-input': (formTo.controls.date.touched || arrivalDateInvalid) && formTo.controls.date.invalid}" type="date" id='arrival-date' formControlName="date">
            <div class="error" *ngIf="(formTo.controls.date.touched || arrivalDateInvalid) && formTo.controls.date.invalid">
                Arrival date is required!
            </div>
            <p>Arrival time:</p>
            <input [ngClass]="{'error-input': (formTo.controls.time.touched || arrivalTimeInvalid) && formTo.controls.time.invalid}" type="time" id='arrival-time' formControlName="time">
            <div class="error" *ngIf="(formTo.controls.time.touched || arrivalTimeInvalid) && formTo.controls.time.invalid">
                Arrival time is required!
            </div>
            <p>Total length in kilometers:</p>
            <input [ngClass]="{'error-input': (formTo.controls.flightLength.touched || flightLengthInvalid) && formTo.controls.flightLength.invalid}" type="text" formControlName="flightLength">
            <div class="error" *ngIf="(formTo.controls.flightLength.touched || flightLengthInvalid) && formTo.controls.flightLength.invalid">
                Flight length is required!
            </div>
            <button type="submit">Next</button>
        </form>
    </div>
    <div *ngIf="step === 4" class="main">
        <h3 style="margin: 40px 0 10px 0">First class</h3>
        <div class="numberOfSeats">
            <p>Number of seats</p>
            <span>This is changable</span>
            <button [ngClass]="{'disabled': minusFirstClassDisabled}" class="minusBtn" [disabled]="minusFirstClassDisabled" (click)="onMinusFirstClass()">
                <svg [ngStyle]="{'fill': minusFirstClassDisabled ? 'rgb(234, 234, 234)' : 'rgb(113, 113, 113)'}" viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block;"><rect height="2" rx="1" width="12" x="6" y="11"></rect></svg>
            </button>
            <input type="number" min="1" [(ngModel)]="firstClassSeatsNumber">
            <button class="plusBtn" (click)="onPlusFirstClass()">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block; fill: rgb(113, 113, 113);"><rect height="2" rx="1" width="12" x="6" y="11"></rect><rect height="12" rx="1" width="2" x="11" y="6"></rect></svg>
            </button>
        </div>
        <div class="pricePerSeat">
            <p>Price for seat</p>
            <span>This is changable</span>
            <div class="input-box">
                <input type="number" min="1" [(ngModel)]="firstClassSeatPrice">
                <span class="dollar">$</span>
            </div>
        </div>
        <h3 style="margin: 50px 0 10px 0">Business</h3>
        <div class="numberOfSeats">
            <p>Number of seats</p>
            <span>This is changable</span>
            <button [ngClass]="{'disabled': minusBusinessDisabled}" [disabled]="minusBusinessDisabled" class="minusBtn" (click)="onMinusBusiness()">
                <svg [ngStyle]="{'fill': minusBusinessDisabled ? 'rgb(234, 234, 234)' : 'rgb(113, 113, 113)'}" viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block;"><rect height="2" rx="1" width="12" x="6" y="11"></rect></svg>
            </button>
            <input type="number" min="1" [(ngModel)]="businessSeatsNumber">
            <button class="plusBtn" (click)="onPlusBusiness()">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block; fill: rgb(113, 113, 113);"><rect height="2" rx="1" width="12" x="6" y="11"></rect><rect height="12" rx="1" width="2" x="11" y="6"></rect></svg>
            </button>
        </div>
        <div class="pricePerSeat">
            <p>Price for seat</p>
            <span>This is changable</span>
            <div class="input-box">
                <input type="number" min="1" [(ngModel)]="businessSeatPrice">
                <span class="dollar">$</span>
            </div>
        </div>
        <h3 style="margin: 50px 0 10px 0">Economy</h3>
        <div class="numberOfSeats">
            <p>Number of seats</p>
            <span>This is changable</span>
            <button [ngClass]="{'disabled': minusEconomyDisabled}" [disabled]="minusEconomyDisabled" class="minusBtn" (click)="onMinusEconomy()">
                <svg [ngStyle]="{'fill': minusEconomyDisabled ? 'rgb(234, 234, 234)' : 'rgb(113, 113, 113)'}" viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block;"><rect height="2" rx="1" width="12" x="6" y="11"></rect></svg>
            </button>
            <input type="number" min="1" [(ngModel)]="economySeatsNumber">
            <button class="plusBtn" (click)="onPlusEconomy()">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block; fill: rgb(113, 113, 113);"><rect height="2" rx="1" width="12" x="6" y="11"></rect><rect height="12" rx="1" width="2" x="11" y="6"></rect></svg>
            </button>
        </div>
        <div class="pricePerSeat">
            <p>Price for seat</p>
            <span>This is changable</span>
            <div class="input-box">
                <input type="number" min="1" [(ngModel)]="economySeatPrice">
                <span class="dollar">$</span>
            </div>
        </div>
        <h3 style="margin: 50px 0 10px 0">Basic economy</h3>
        <div class="numberOfSeats">
            <p>Number of seats</p>
            <span>This is changable</span>
            <button [ngClass]="{'disabled': minusBasicEconomyDisabled}" [disabled]="minusBasicEconomyDisabled" class="minusBtn" (click)="onMinusBasicEconomy()">
                <svg [ngStyle]="{'fill': minusBasicEconomyDisabled ? 'rgb(234, 234, 234)' : 'rgb(113, 113, 113)'}" viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block;"><rect height="2" rx="1" width="12" x="6" y="11"></rect></svg>
            </button>
            <input type="number" min="1" [(ngModel)]="basicEconomySeatsNumber">
            <button class="plusBtn" (click)="onPlusBasicEconomy()">
                <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 22px; width: 22px; display: block; fill: rgb(113, 113, 113);"><rect height="2" rx="1" width="12" x="6" y="11"></rect><rect height="12" rx="1" width="2" x="11" y="6"></rect></svg>
            </button>
        </div>
        <div class="pricePerSeat">
            <p>Price for seat</p>
            <span>This is changable</span>
            <div class="input-box">
                <input type="number" min="1" [(ngModel)]="basicEconomySeatPrice">
                <span class="dollar">$</span>
            </div>
        </div>
        <button id="finish" (click)="addSeats()">Finish</button>
    </div>
</main>